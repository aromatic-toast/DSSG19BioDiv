sara_designations <- c(sara_designations, "Data Deficient")
}else
sara_designations <- c(sara_designations, "Not Listed")
}
# add the sara designations vector to the species_info dataframe
species_info$sara_designations <- sara_designations
View(head(species_info))
write.csv(species_info, file = "Taxonomy_Freq.csv", row.names = FALSE)
getwd()
# read in the specific species info data frame
species_info <- read.csv("Taxonomy_Freq.csv", stringsAsFactors = F)
View(head(species_info))
IUCN_binary <- c()
for (i in species_info$IUCN_binary){
if(is.na(i)){
IUCN_redList_binary <- c(IUCN_redList_binary, 0)
}else {
IUCN_redList_binary <- c(IUCN_redList_binary, 1)
}
}
# add the binary vector to the species_info dataframe
species_info$IUCN_binary <- IUCN_redList_binary
# read in IUCN red list
IUCN <- read.csv("~/Desktop/datasets/IUCN_redlist.csv",
stringsAsFactors = F,
na.strings = c("", " "))
# read in the full BC rainbow list dataframe
rainbow_list <- read.csv("~/Desktop/datasets/bc_rainbow_list.tsv",
sep = "\t",
stringsAsFactors = F,
na.strings = c("", " "))
for (i in species_info$IUCN_binary){
if(is.na(i)){
IUCN_redList_binary <- c(IUCN_redList_binary, 0)
}else {
IUCN_redList_binary <- c(IUCN_redList_binary, 1)
}
}
# add the binary vector to the species_info dataframe
species_info$IUCN_binary <- IUCN_redList_binary
for (i in species_info$BC.List){
if(i == "Red"){
bc_red_binary <- c(bc_red_binary, 1)
}else {
bc_red_binary <- c(bc_red_binary, 0)
}
}
# add the bc_red list binary vector to the species_info dataframe
species_info$bc_red_binary <- bc_red_binary
for (i in species_info$BC.List){
if(i == "Blue"){
bc_blue_binary <- c(bc_blue_binary, 1)
}else {
bc_blue_binary <- c(bc_blue_binary, 0)
}
}
# add the bc_blue list binary vector to the species_info dataframe
species_info$bc_blue_binary <- bc_blue_binary
IUCN_binary <- c()
for (i in species_info$redList){
if(is.na(i)){
IUCN_redList_binary <- c(IUCN_redList_binary, 0)
}else {
IUCN_redList_binary <- c(IUCN_redList_binary, 1)
}
}
# add the binary vector to the species_info dataframe
species_info$IUCN_binary <- IUCN_redList_binary
# create a binary vector for BC red listed species
# 1 = entry is a string "red" , 0 = entry is anything that is not string "red"
bc_red_binary <- c()
for (i in species_info$bc_list){
if(i == "Red"){
bc_red_binary <- c(bc_red_binary, 1)
}else {
bc_red_binary <- c(bc_red_binary, 0)
}
}
# add the bc_red list binary vector to the species_info dataframe
species_info$bc_red_binary <- bc_red_binary
# create a binary vector for BC blue listed species
# 1 = entry is a string "Blue" , 0 = entry is anything that is not string "Blue"
bc_blue_binary <- c()
for (i in species_info$bc_list){
if(i == "Blue"){
bc_blue_binary <- c(bc_blue_binary, 1)
}else {
bc_blue_binary <- c(bc_blue_binary, 0)
}
}
# add the bc_blue list binary vector to the species_info dataframe
species_info$bc_blue_binary <- bc_blue_binary
# create a binary vector for BC endemic listed species
# these species are being tagged as only living in BC
# 1 = entry is a string "Y" , 0 = entry is anything that is not string "Y"
bc_endemic_binary <- c()
for (i in species_info$Endemic){
if(i == "Y"){
bc_endemic_binary <- c(bc_endemic_binary, 1)
}else {
bc_endemic_binary <- c(bc_endemic_binary, 0)
}
}
# add the bc_blue list binary vector to the species_info dataframe
species_info$bc_endemic_binary <- bc_endemic_binary
######  create a binary vector for pollinators ########
# pollinator info obtained from wikipedia
# Note: the following species will be tagged as pollinators
# the following are all hummingbirds
# - Archilochus alexandri
# - Calypte anna
# - Calypte costae
# - Selasphorus rufus
# - Selasphorus sasin
# - Stellula calliope
# the following insect genera will be tagged as pollinators
# - Apis (honeybees)
# - Bombus (bumblebees)
# the following insect families will be tagged as pollinators
# family=="Masarinae" = pollen wasps
#   family=="Formicidae"  = ants
#   family=="Bombyliidae" = bee flies
#   family=="Syrphidae" = hover flies
#   family=="Buprestidae" = beetle
#   family=="Cantharidae" = beetle
#   family=="Carambycidae" = beetle
#   family=="Cleridae" = beetle
#   family=="Dermestidae" = beetle
#   family=="Lycidae" = beetle
#   family=="Melyridae" = beetle
#   family=="Mordellidae"  = beetle
#   family=="Nitidulidae"  = beetle
#   family=="Scarabeidae" = beetle
# the following insect Order will be tagged as pollinators
# they are moths and butterflies
# Lepidoptera
# create a pollinators dataframe
pollinators <- species_info %>%
filter(genus=="Apis" |
genus=="Bombus" |
order=="Lepidoptera" |
family=="Masarinae" |
family=="Formicidae" |
family=="Bombyliidae" |
family=="Syrphidae" |
family=="Buprestidae" |
family=="Cantharidae" |
family=="Carambycidae" |
family=="Cleridae" |
family=="Dermestidae" |
family=="Lycidae" |
family=="Melyridae" |
family=="Mordellidae" |
family=="Nitidulidae" |
family=="Scarabeidae" |
simplified_names == "Archilochus alexandri" |
simplified_names == "Calypte anna" |
simplified_names == "Calypte costae" |
simplified_names == "Selasphorus rufus" |
simplified_names == "Selasphorus sasin" |
simplified_names == "Stellula calliope")
# create a binary vector for pollinator species
# 1 = species is in the pollinator list above , 0 = species is not found in the pollinator list
pollinator_binary <- c()
for (i in species_info$simplified_names){
if(i %in% pollinators$simplified_names){
pollinator_binary <- c(pollinator_binary, 1)
}else {
pollinator_binary <- c(pollinator_binary, 0)
}
}
# add the pollinator binary vector to the species_info dataframe
species_info$pollinator_binary <- pollinator_binary
# rename the pollinator column to pollinator_binary
#species_info <- species_info %>% rename(pollinator_binary = pollinator)
# create a binary vector for SARA listed species
# 1 = species is SARA listed, 0 = species is not on the SARA list
sara_binary <- c()
for (i in species_info$SARA){
if(is.na(i)){
sara_binary <- c(sara_binary, 0)
}else {
sara_binary <- c(sara_binary, 1)
}
}
# add the SARA binary vector to the species_info dataframe
species_info$sara_binary <- sara_binary
# Turn the SARA designations into a human readable vector
sara_designations <- c()
for(i in species_info$SARA){
if(is.na(i)){
sara_designations <- c(sara_designations, "Not Listed")
} else if(length(grep("XX", i))> 0){
sara_designations <- c(sara_designations, "Extinct")
}else if(length(grep("XT", i))> 0){
sara_designations <- c(sara_designations, "Extirpated")
}else if(length(grep("E", i))> 0){
sara_designations <- c(sara_designations, "Endangered")
}else if(length(grep("T", i))> 0){
sara_designations <- c(sara_designations, "Threatened")
}else if(length(grep("SC", i))> 0){
sara_designations <- c(sara_designations, "Special Concern")
}else if(length(grep("NAR", i))> 0){
sara_designations <- c(sara_designations, "Not At Risk")
}else if(length(grep("DD", i))> 0){
sara_designations <- c(sara_designations, "Data Deficient")
}else
sara_designations <- c(sara_designations, "Not Listed")
}
# add the sara designations vector to the species_info dataframe
species_info$sara_designations <- sara_designations
bc_red_binary <- c()
for (i in species_info$bc_list){
if(i == "Red"){
print(i)
bc_red_binary <- c(bc_red_binary, 1)
}else {
bc_red_binary <- c(bc_red_binary, 0)
}
}
bc_red_binary <- c()
for (i in species_info$bc_list){
print(i)
if(i == "Red"){
bc_red_binary <- c(bc_red_binary, 1)
}else {
bc_red_binary <- c(bc_red_binary, 0)
}
}
NA=="red"
bc_red_binary <- c()
for (i in species_info$bc_list){
if(is.na(i)){
bc_red_binary <- c(bc_red_binary, 0)
}else if(i == "Red"){
bc_red_binary <- c(bc_red_binary, 1)
}else {
bc_red_binary <- c(bc_red_binary, 0)
}
}
# add the bc_red list binary vector to the species_info dataframe
species_info$bc_red_binary <- bc_red_binary
bc_blue_binary <- c()
for (i in species_info$bc_list){
if(is.na(i)){
bc_blue_binary <- c(bc_blue_binary, 0)
}else if(i == "Blue"){
bc_blue_binary <- c(bc_blue_binary, 1)
}else {
bc_blue_binary <- c(bc_blue_binary, 0)
}
}
# add the bc_blue list binary vector to the species_info dataframe
species_info$bc_blue_binary <- bc_blue_binary
bc_endemic_binary <- c()
for (i in species_info$Endemic){
if(is.na(i)){
bc_endemic_binary <- c(bc_endemic_binary, 0)
}
if(i == "Y"){
bc_endemic_binary <- c(bc_endemic_binary, 1)
}else {
bc_endemic_binary <- c(bc_endemic_binary, 0)
}
}
for (i in species_info$Endemic){
if(is.na(i)){
bc_endemic_binary <- c(bc_endemic_binary, 0)
}else if(i == "Y"){
bc_endemic_binary <- c(bc_endemic_binary, 1)
}else {
bc_endemic_binary <- c(bc_endemic_binary, 0)
}
}
# add the bc_blue list binary vector to the species_info dataframe
species_info$bc_endemic_binary <- bc_endemic_binary
length(bc_endemic_binary)
nrow(species_info)
bc_endemic_binary <- c()
for (i in species_info$Endemic){
if(is.na(i)){
bc_endemic_binary <- c(bc_endemic_binary, 0)
}else if(i == "Y"){
bc_endemic_binary <- c(bc_endemic_binary, 1)
}else {
bc_endemic_binary <- c(bc_endemic_binary, 0)
}
}
length(bc_endemic_binary)
# add the bc_blue list binary vector to the species_info dataframe
species_info$bc_endemic_binary <- bc_endemic_binary
# create a pollinators dataframe
pollinators <- species_info %>%
filter(genus=="Apis" |
genus=="Bombus" |
order=="Lepidoptera" |
family=="Masarinae" |
family=="Formicidae" |
family=="Bombyliidae" |
family=="Syrphidae" |
family=="Buprestidae" |
family=="Cantharidae" |
family=="Carambycidae" |
family=="Cleridae" |
family=="Dermestidae" |
family=="Lycidae" |
family=="Melyridae" |
family=="Mordellidae" |
family=="Nitidulidae" |
family=="Scarabeidae" |
simplified_names == "Archilochus alexandri" |
simplified_names == "Calypte anna" |
simplified_names == "Calypte costae" |
simplified_names == "Selasphorus rufus" |
simplified_names == "Selasphorus sasin" |
simplified_names == "Stellula calliope")
if(i %in% pollinators$simplified_names){
pollinator_binary <- c(pollinator_binary, 1)
}else {
pollinator_binary <- c(pollinator_binary, 0)
}
# add the pollinator binary vector to the species_info dataframe
species_info$pollinator_binary <- pollinator_binary
sara_binary <- c(sara_binary, 1)
# add the SARA binary vector to the species_info dataframe
species_info$sara_binary <- sara_binary
sara_designations <- c()
for(i in species_info$SARA){
if(is.na(i)){
sara_designations <- c(sara_designations, "Not Listed")
} else if(length(grep("XX", i))> 0){
sara_designations <- c(sara_designations, "Extinct")
}else if(length(grep("XT", i))> 0){
sara_designations <- c(sara_designations, "Extirpated")
}else if(length(grep("E", i))> 0){
sara_designations <- c(sara_designations, "Endangered")
}else if(length(grep("T", i))> 0){
sara_designations <- c(sara_designations, "Threatened")
}else if(length(grep("SC", i))> 0){
sara_designations <- c(sara_designations, "Special Concern")
}else if(length(grep("NAR", i))> 0){
sara_designations <- c(sara_designations, "Not At Risk")
}else if(length(grep("DD", i))> 0){
sara_designations <- c(sara_designations, "Data Deficient")
}else
sara_designations <- c(sara_designations, "Not Listed")
}
# add the sara designations vector to the species_info dataframe
species_info$sara_designations <- sara_designations
View(head(species_info))
write.csv(species_info, file = "Taxonomy_Freq.csv", row.names = FALSE)
# read in the specific species info data frame
species_info <- read.csv("Taxonomy_Freq.csv", stringsAsFactors = F)
View(head(species_info))
# read in the specific species info data frame
species_info <- read.csv("Taxonomy_Freq.csv", stringsAsFactors = F)
View(head(species_info))
# read in IUCN red list
IUCN <- read.csv("~/Desktop/datasets/IUCN_redlist.csv",
stringsAsFactors = F,
na.strings = c("", " "))
View(head(IUCN))
(tidyverse)
getwd()
install.packages()
install.packages("tidyverse")
# prepare the species info dataframe to contain custom tags for shiny app plotting
library(tidyverse)
for (i in species_info$redList){
if(is.na(i)){
IUCN_binary <- c(IUCN_binary, 0)
}else {
IUCN_binary <- c(IUCN_binary, 1)
}
}
IUCN_binary <- c()
for (i in species_info$redList){
if(is.na(i)){
IUCN_binary <- c(IUCN_binary, 0)
}else {
IUCN_binary <- c(IUCN_binary, 1)
}
}
# add the binary vector to the species_info dataframe
species_info$IUCN_binary <- IUCN_binary
View(head(species_info))
write.csv(species_info, file = "Taxonomy_Freq.csv", row.names = FALSE)
# read in the specific species info data frame
species_info <- read.csv("Taxonomy_Freq.csv", stringsAsFactors = F)
View(head(species_info))
poly_index <- c(1:24)
poly_type1 <- rep(c("OF", "MF", "WD", "RI", "WN", "HB", "SV", "ES", "IT", "FW", "AP"), 2)
poly_comp1 <- c(rep(1, 12), 0.8, rep(1, 11))
poly_type2 <- c("WD", rep(NA, 11))
poly_comp2 <- c(0.2, rep(NA, 11))
df_polygons <- data.frame(c(poly_index, poly_type1, poly_comp1, poly_type2, poly_comp2))
View(df_polygons)
df_polygons <- data.frame(poly_index, poly_type1, poly_comp1, poly_type2, poly_comp2)
poly_index <- c(1:24)
poly_type1 <- rep(c("OF", "MF", "WD", "RI", "WN", "HB", "SV", "ES", "IT", "FW", "AP"), 2)
poly_comp1 <- c(rep(1, 12), 0.8, rep(1, 11))
poly_type2 <- c(rep(NA, 12),"WD", rep(NA, 11))
poly_comp2 <- c(rep(NA, 12),0.2, rep(NA, 11))
df_polygons <- data.frame(poly_index, poly_type1, poly_comp1, poly_type2, poly_comp2)
length(poly_comp1)
length(poly_comp2)
poly_type1
length(poly_type1)
poly_type2
lenght(poly_type2)
length(poly_type2)
poly_index <- c(1:24)
poly_type1 <- rep(c("OF", "MF", "WD", "RI", "WN", "HB", "SV", "ES", "IT", "FW", "AP", "ME"), 2)
poly_comp1 <- c(rep(1, 12), 0.8, rep(1, 11))
poly_type2 <- c(rep(NA, 12),"WD", rep(NA, 11))
poly_comp2 <- c(rep(NA, 12),0.2, rep(NA, 11))
df_polygons <- data.frame(poly_index, poly_type1, poly_comp1, poly_type2, poly_comp2)
View(df_polygons)
poly_index <- c(1:12)
poly_type1 <- rep(c("OF", "MF", "WD", "RI", "WN", "HB", "SV", "ES", "IT", "FW", "AP", "ME"), 2)
poly_comp1 <- c(rep(1, 12), 0.8, rep(1, 11))
poly_type2 <- c(rep(NA, 12),"WD", rep(NA, 11))
poly_comp2 <- c(rep(NA, 12),0.2, rep(NA, 11))
df_polygons <- data.frame(poly_index, poly_type1, poly_comp1, poly_type2, poly_comp2)
View(df_polygons)
poly_index <- c(1:24)
poly_type1 <- rep(c("OF", "MF", "WD", "RI", "WN", "HB", "SV", "ES", "IT", "FW", "AP", "ME"), 2)
poly_comp1 <- c(rep(1, 12), 0.8, rep(1, 11))
poly_type2 <- c(rep(NA, 12),"WD", rep(NA, 11))
poly_comp2 <- c(rep(NA, 12),0.2, rep(NA, 11))
df_polygons <- data.frame(poly_index, poly_type1, poly_comp1, poly_type2, poly_comp2)
View(df_polygons)
# read in the specific species info data frame
species_info <- read.csv("Taxonomy_Freq.csv", stringsAsFactors = F)
View(head(species_info))
View(head(species_info), 50)
View(head(species_info, 50))
species <- c(rep("Abagrotis baueri", 3), rep("Abies balsamea", 4), "Abies bracteata", "Acanthocalyx alba", rep("Acacia pravissima", 3),
rep("Abagrotis baueri", 3), "Acaena splendens", "Abrostola urentis", rep("Abies balsamea", 2), "Abies bracteata", "Acanthocalyx alba", rep("Acacia pravissima", 3))
df_polygons <- data.frame(poly_index, poly_type1, poly_comp1, poly_type2, poly_comp2, species)
View(df_polygons)
library(tidyverse)
# group by polygon type
group_by(df_polygons, poly_type1)
# group by polygon type
View(group_by(df_polygons, poly_type1))
class(group_by(df_polygons, poly_type1))
# group by polygon type
View(group_by(df_polygons, poly_type1))
# group by polygon type
by_poly_type1 <- group_by(df_polygons, poly_type1)
by_poly_type1 %>% summarise(n())
?summarise
poly_index <- c(1:24, 1)
poly_type1 <- c(rep(c("OF", "MF", "WD", "RI", "WN", "HB", "SV", "ES", "IT", "FW", "AP", "ME"), 2), "OF")
poly_comp1 <- c(rep(1, 12), 0.8, rep(1, 11),1)
poly_type2 <- c(rep(NA, 12),"WD", rep(NA, 11), NA)
poly_comp2 <- c(rep(NA, 12),0.2, rep(NA, 11), NA)
species <- c(rep("Abagrotis baueri", 3), rep("Abies balsamea", 4), "Abies bracteata", "Acanthocalyx alba", rep("Acacia pravissima", 3),
rep("Abagrotis baueri", 3), "Acaena splendens", "Abrostola urentis", rep("Abies balsamea", 2), "Abies bracteata", "Acanthocalyx alba", rep("Acacia pravissima", 3),
"Acanthocalyx alba")
# create the whole species_SEI dataframe
df_polygons <- data.frame(poly_index, poly_type1, poly_comp1, poly_type2, poly_comp2, species)
# group by polygon type
by_poly_type1 <- group_by(df_polygons, poly_type1)
by_poly_type1 %>% summarise(num_polys = unique(poly_index)
by_poly_type1 %>% summarise(num_polys = unique(poly_index))
by_poly_type1 %>% num_polys = unique(poly_index)
by_poly_type1 %>% unique(poly_index)
by_poly_type1 %>% summarise(num_polys = unique(poly_index))
filter(df_polygons, poly_type1=="OF") %>% select(poly_index) %>% unique()
class(filter(df_polygons, poly_type1=="OF") %>% select(poly_index) %>% unique())
filter(df_polygons, species == "Abagrotis baueri")
# filter by species
filter(df_polygons, species == "Abagrotis baueri") %>%
filter(poly_type1 == "OF")
# filter by species
filter(df_polygons, species == "Abagrotis baueri") %>%
filter(poly_type1 == "OF") %>% length(poly_index)
# filter by species
filter(df_polygons, species == "Abagrotis baueri") %>%
filter(poly_type1 == "OF") %>%
select(poly_index) %>%
length()
length(df_polygons)
ncol(df_polygons)
# filter by species
filter(df_polygons, species == "Abagrotis baueri") %>%
filter(poly_type1 == "OF") %>%
select(poly_index) %>%
unique(.)
# filter by species
filter(df_polygons, species == "Abagrotis baueri") %>%
filter(poly_type1 == "OF") %>%
select(poly_index) %>%
length(unique(.))
?select
# filter by species
d <- filter(df_polygons, species == "Abagrotis baueri") %>%
filter(poly_type1 == "OF")
d["poly_index"]
d[["poly_index"]]
unique(d[["poly_index"]])
length(unique(d[["poly_index"]]))
# filter by species
filter(df_polygons, species == "Abagrotis baueri") %>%
filter(poly_type1 == "OF") %>%
select(poly_index) %>%
nrow()
########## SEI and species prediction #########
df_sei_polygons <- read.csv("sei_data.csv", stringsAsFactors = F)
View(head(df_sei_polygons))
